\documentclass[../Moduli_Spaces_of_Riemann_Surfaces.tex]{subfiles}
\begin{document}
    \begin{proposition}\label{CS:prp:basis_stalk}
        Let $\ms{F}$ be a presheaf of Abelian groups on $X$. Let $\l|\ms{F}\r|\coloneqq\coprod_{p\in X}\ms{F}_p$ and consider the projection $\pi:\l|\ms{F}\r|\to X$ mapping each $\eta\in\ms{F}_p$ to $p$. Then the system $\mc{B}$ of all sets
        \begin{equation*}
            \l[U,f\r]\coloneqq\bigl\{\l[f\r]_p\,\l|\,p\in U\bigr\}\r.\subseteq\l|\ms{F}\r|
        \end{equation*}
        for $U\in\tau$ and $f\in\ms{F}\l(U\r)$ is a basis for a topology on $\l|\ms{F}\r|$ and $\pi$ is a local homeomorphism.
    \end{proposition}
    \begin{proof}
        We first verify that $\mc{B}$ is a basis.
        \begin{enumerate}
            \item[(1)] Take $\eta\in\l|\ms{F}\r|$, so there exists an open set $U\in\tau$ such that $\eta=\l[f\r]_p$ for some $f\in\ms{F}\l(U\r)$ and $p\in U$. Observe that $\eta\in\l[U,f\r]$.
            \item[(2)] Take $\l[U,f\r],\l[V,g\r]\in\mc{B}$ and $\eta\in\l[U,f\r]\cap\l[V,g\r]$. Then there exists a point $p\in X$ such that $\eta=\l[f\r]_p=\l[g\r]_p$, which furnishes an open set $W\in\tau$ with $p\in W\subseteq U\cap V$ such that $\rho^U_W\!\l(f\r)=\rho^V_W\!\l(g\r)\eqqcolon h$. Then $\eta=\l[h\r]_p$ with $h\in W$, so $\eta\in\l[W,h\r]\subseteq\l[U,f\r]\cap\l[V,g\r]$.
        \end{enumerate}
        To show that $\pi$ is a local homeomorphism, fix $\eta\in\l|\ms{F}\r|$, say with $p\coloneqq\pi\l(\eta\r)$. By (1), there exists some $\l[U,f\r]\in\mc{B}$ containing $\eta$; we claim that $\l.\pi\r|_{\l[U,f\r]}:\l[U,f\r]\to U$ is a homeomorphism.
        \begin{itemize}
            \item For injectivity, take $\psi_1,\psi_2\in\l[U,f\r]$ such that $\pi\l(\psi_1\r)=\pi\l(\psi_2\r)$. Then $\psi_1=\l[f\r]_p$ and $\psi_2=\l[f\r]_q$ for some $p,q\in X$, but since $p=q$, they coincide.
            \item For continuity, it suffices to show that $\l.\pi\r|_{\l[U,f\r]}$ is an open map. Indeed, if $\l[V,g\r]\subseteq\l[U,f\r]$ is open, then $\l.\pi\r|_{\l[U,f\r]}\l(\l[V,g\r]\r)=V$ is open too.\qed
        \end{itemize}
    \end{proof}
    \begin{definition}
        The \ul{Étalé space} of a presheaf $\ms{F}$ of Abelian groups on $X$ is the topological space $\l|\ms{F}\r|$ equipped the projection $\pi:\l|\ms{F}\r|\to X$.
    \end{definition}
    \begin{definition}
        A presheaf $\ms{F}$ of Abelian groups on $X$ is said to satisfy the \ul{Identity Theorem} if for all $U\in\tau$ and all $f,g\in\ms{F}\l(U\r)$, if there is some $p\in U$ such that $\l[f\r]_p=\l[g\r]_p$, then $f=g$ (on $U$).
    \end{definition}
    \footnote{In particular, this holds for all $\HOLO\l[D\r]$. In contrast, the sheaf of smooth functions $\DIFF$ (see Section \ref{CC:sec:differential_forms}) does \textit{not} satisfy the Identity Theorem.}
    \begin{proposition}\label{CS:prp:stalk_topology_Hausdorff}
        If $X$ is a locally-connected Hausdorff space and $\ms{F}$ is a presheaf of Abelian groups on $X$ that satisfy the Identity Theorem, then $\l|\ms{F}\r|$ is Hausdorff.
    \end{proposition}
    \begin{proof}
        Take distinct $\eta_1,\eta_2\in\l|\ms{F}\r|$. Two cases occur.
        \begin{itemize}
            \item If $p\coloneqq\pi\l(\eta_1\r)\neq\pi\l(\eta_2\r)\eqqcolon q$, then, since $X$ is Hausdorff, there exist disjoint neighborhoods $U$ of $p$ and $V$ of $q$. On those neighborhoods, $\pi$ is invertible and the sets $\pi^{-1}\!\l(U\r)$ and $\pi^{-1}\!\l(V\r)$ are disjoint neighborhoods of $\eta_1$ and $\eta_2$, respectively.
        \end{itemize}
        Otherwise, set $p\coloneqq\pi\l(\eta_1\r)=\pi\l(\eta_2\r)$ and suppose that each $\eta_i$ is represented by some $f_i\in\ms{F}\l(U_i\r)$. Since $X$ is locally-connected, there exists a connected neighborhood $U\subseteq U_1\cap U_2$ of $p$. Restricting both $f_i$ to $g_i\coloneqq\rho^{U_i}_U\!\l(f_i\r)$, the sets $\l[U,g_i\r]$ are neighborhoods of $\eta_i$. Suppose, for sake of contradiction, that there exists some $\psi\in\l[U,g_1\r]\cap\l[U,g_2\r]$. Setting $q\coloneqq\pi\l(\psi\r)$, we see that $\psi=\l[g_1\r]_q=\l[g_2\r]_q$, from which the Identity Theorem shows that $g_1=g_2$. Note that $f_i\sim_pg_i$, so $\eta_1=\eta_2$, a contradiction. Hence the neighborhoods $\l[U,g_1\r]$ an $\l[U,g_2\r]$ are disjoint, as desired.\qed
    \end{proof}
    We now restrict to when $X$ is a Riemann surface with a fixed point $p\in X$. For convenience, we write\footnote{Thus if $U\subseteq X$ is an open set containing $p$, then any $f\in\HOLO_p\!\l[p\r]\l(U\r)$ has at most a single simple pole. Otherwise, if $p\not\in U$, then $f$ is holomorphic.} $\HOLO\l[p\r]\coloneqq\HOLO\l[D\r]$ where $D$ is the divisor on $X$ defined by $D\l(p\r)\coloneqq1$ and zero everywhere else. Throughout, $\alpha:\l[0,1\r]\to X$ is a curve with $p=\alpha\l(0\r)$ and $q\coloneqq\alpha\l(1\r)\neq p$, and $\eta_0\in\HOLO_p\!\l[p\r]$ is a fixed germ.
    \begin{definition}
        A germ $\hat{\eta}\in\HOLO_q$ is said to be the \ul{analytic continuation of $\eta_0$ along $\alpha$} if there exist a family $\eta_t\in\HOLO_{\alpha\l(t\r)}\!\l[p\r]$ of germs for all $t\in\l[0,1\r]$ with $\hat{\eta}=\eta_1$ such that for all $\tau\in\l[0,1\r]$, there exists a neighborhood $T\subseteq\l[0,1\r]$ of $\tau$, an open set $U\subseteq X$ with $\alpha\l(T\r)\subseteq U$, and a function $f\in\HOLO\l[p\r]\l(U\r)$ such that $\l[f\r]_{\alpha\l(t\r)}=\eta_t$ for all $t\in T$.
    \end{definition}
    \begin{proposition}\label{CS:prp:analytic_continuation_iff_lifting}
        A germ $\hat{\eta}\in\HOLO_q$ is an analytic continuation of $\eta_0$ along $\alpha$ iff there exists a lifting $\tilde{\alpha}:\l[0,1\r]\to\l|\HOLO\l[p\r]\r|$ such that $\tilde{\alpha}\l(0\r)=\eta_0$ and $\tilde{\alpha}\l(1\r)=\hat{\eta}$.
    \end{proposition}
    \begin{proof}
        If\footnote{In particular, the uniqueness of liftings shows that if an analytic continuation of $\eta_0$ along $\alpha$ exists, then it is unique.} $\hat{\eta}\in\HOLO_q$ is an analytic continuation of $\eta_0$ along $\alpha$, let $\l\{\eta_t\r\}$ be a family of germs as defined above. We claim that the curve $\tilde{\alpha}:\l[0,1\r]\to\l|\HOLO\l[p\r]\r|$ mapping $t\mapsto\eta_t$ is a lifting of $\alpha$.
        \begin{itemize}
            \item First, note that $\eta_t\in\HOLO_{\alpha\l(t\r)}\!\l[p\r]$ for all $t\in\l[0,1\r]$, so\footnote{Clearly $\tilde{\alpha}\l(0\r)=\eta_0$ and $\tilde{\alpha}\l(1\r)=\hat{\eta}$.
                \begin{equation*}
                    \begin{tikzcd}[ampersand replacement=\&]
                        \& \l|\HOLO\l[p\r]\r| \ar[d, "\pi"] \\
                        \l[0,1\r] \ar[r, "\alpha"'] \ar[ur, "\tilde{\alpha}"] \& X
                    \end{tikzcd}
                \end{equation*}
                } $\l(\pi\circ\tilde{\alpha}\r)\l(t\r)=\pi\l(\tilde{\alpha}\l(t\r)\r)=\pi\l(\eta_t\r)=\alpha\l(t\r)$. It remains to show that $\tilde{\alpha}$ is continuous, so fix a basis element $\l[U,f\r]\subseteq\l|\HOLO\l[p\r]\r|$ and take $\tau\in\tilde{\alpha}^{-1}\!\l(\l[U,f\r]\r)$. Then $\tau\in\l[0,1\r]$, so there exists a neighborhood $T\subseteq\l[0,1\r]$ of $\tau$ such that $\l[f\r]_{\alpha\l(t\r)}=\eta_t$ for all $t\in T$. Observe that $\tilde{\alpha}\l(T\r)\subseteq\l[U,f\r]$ since for all $\eta_t\in\tilde{\alpha}\l(T\r)$, we have $\alpha\l(t\r)\in U$ and hence $\eta_t=\l[f\r]_{\alpha\l(t\r)}\in\l[U,f\r]$.
        \end{itemize}
        Conversely, suppose that there is a lifting $\tilde{\alpha}:\l[0,1\r]\to\l|\HOLO\l[p\r]\r|$ of $\alpha$ with $\tilde{\alpha}\l(0\r)=\eta_0$ and $\tilde{\alpha}\l(1\r)=\hat{\eta}$. For all $t\in\l[0,1\r]$, we define $\eta_t\coloneqq\tilde{\alpha}\l(t\r)$, so $\eta_1=\hat{\eta}$. Fix $\tau\in\l[0,1\r]$, so there exists a basis neighborhood $\l[U,f\r]\subseteq\l|\HOLO\l[p\r]\r|$ of $\tilde{\alpha}\l(\tau\r)$. But $\tilde{\alpha}$ is continuous, so there exists a neighborhood $T\subseteq\l[0,1\r]$ of $\tau$ such that $\tilde{\alpha}\l(T\r)\subseteq\l[U,f\r]$. Projecting, we see that $\alpha\l(T\r)\subseteq\pi\l(\l[U,f\r]\r)=U$. Finally, the commutativity of the diagram gives $\l[f\r]_{\alpha\l(t\r)}\!=\eta_t$ for all $t\in T$, so $\hat{\eta}$ is an analytic continuation of $\eta_0$ along $\alpha$.\qed
    \end{proof}
    \begin{corollary}[Monodromy Theorem]
        Let $\alpha_0,\alpha_1:\l[0,1\r]\to X$ be homotopic curves from $p$ to $q$. If the germ $\eta_0\in\HOLO_p\!\l[p\r]$ admits an analytic continuation along every deformation of $\alpha_0$ to $\alpha_1$, then the analytic continuations of $\eta_0$ along $\alpha_0$ and $\alpha_1$ coincide.
    \end{corollary}
    \begin{proof}
        By Propositions \ref{CS:prp:basis_stalk} and \ref{CS:prp:stalk_topology_Hausdorff}, $\l|\HOLO\l[p\r]\r|$ is Hausdorff whose projection $\pi:\l|\HOLO\l[p\r]\r|\to X$ is a local homeomorphism. Since each deformation admits a lifting starting at $\eta_0$, the\footnote{This is a standard result in algebraic topology. For a proof, see \cite[][Proposition 4.10]{forster}.} liftings $\tilde{\alpha}_0$ and $\tilde{\alpha}_1$ have the same endpoints; that is, the analytic continuations along $\alpha_0$ and $\alpha_1$ coincide.\qed
    \end{proof}
    \begin{corollary}\label{CS:thm:analytically_continue_to_global_function}
        Suppose $X$ is simply-connected. If the germ $\eta_0\in\HOLO_p\!\l[p\r]$ admits an analytic continuation along every curve starting at $p$, then there exists a unique (globally-defined) function $f\in\HOLO\l[p\r]\l(X\r)$ with $\l[f\r]_p=\eta_0$.
    \end{corollary}
    \begin{proof}
        Uniqueness follows from the Identity Theorem. For existence, we define $f\l(q\r)\coloneqq\hat{\eta}_q\!\l(q\r)$ where $\hat{\eta}_q\!\in\HOLO_q\!\l[p\r]$ is the analytic continuation along any curve from $p$ to $q$. Since $X$ is simply-connected, the Monodromy Theorem ensures that $\hat{\eta}_q$ is well-defined. Clearly $f\l(p\r)=\eta_0\!\l(p\r)$, so $\l[f\r]_p=\eta_0$. Finally, since $\l[f\r]_q=\hat{\eta}_q\in\HOLO_q\!\l[p\r]$ for all $q\in X$, we see that $f\in\HOLO\l[p\r]\l(X\r)$.\qed
    \end{proof}
    \begin{remark}
        Let $U\subseteq X$ be any open set containing $p$ and consider any function $f_0\in\HOLO\l[p\r]\l(U\r)$. We have reduced the problem of analytically continuing $f_0$ to a global function $f\in\HOLO[p]\l(X\r)$ with $\l.f\r|_U=f_0$ into finding analytic continuations of $\l[f_0\r]_p$ along every curve starting at $p$. We shall establish this fact under (under some conditions) in the next section.\exqed
    \end{remark}
    In this section, we let $E\subseteq\l|\HOLO\l[p\r]\r|$ be the connected component of the Étalé space of $\HOLO\l[p\r]$ containing $\eta_0$ and write $\pi:E\to X$ as the restricted projection map.
    \begin{theorem}\label{CS:thm:existence_of_analytic_continuation}
        If $\pi$ is a covering map, then for any $q\in X$ and any curve $\alpha:\l[0,1\r]\to X$ with $\alpha\l(0\r)=p$ and $\alpha\l(1\r)=q$, there exists an analytic continuation $\hat{\eta}\in\HOLO_q\!\l[p\r]$ of $\eta_0$ along $\alpha$.
    \end{theorem}
    \begin{proof}
        Define a complex structure $\mf{A}$ on $E$, that makes $\pi$ locally biholomorphic, as follows.
        \begin{itemize}
            \item For any $\zeta\in E$, let $\tpl{U_0,\phi}$ be a chart of $X$ around $\pi\l(\zeta\r)$. Since $\pi$ is a local homeomorphism, there exist neighborhoods $V\subseteq E$ of $\zeta$ and $U\subseteq U_0$ of $\pi\l(\zeta\r)$ such that $\l.\pi\r|_V:V\to U$ is a homeomorphism. Set $\psi\coloneqq\phi\circ\l.\pi\r|_V$, so $\tpl{V,\psi}$ is a chart on $E$ around $\zeta$. Let $\mf{A}$ be the collection of all such charts, which defines an atlas on $E$ since for any pair of charts $\tpl{V_1,\psi_1},\tpl{V_2,\psi_2}\in\mf{A}$ with $V_1\cap V_2\neq\em$, there exist charts $\tpl{U_1,\phi_1}$ and $\tpl{U_2,\phi_2}$ of $X$ such that
                \begin{equation*}
                    \psi_2\circ\psi_1^{-1}=\l(\phi_2\circ\l.\pi\r|_{V_2}\r)\circ\l(\phi_1\circ\l.\pi\r|_{V_1}\r)^{-1}=\phi_2\circ\l(\l.\pi\r|_{V_2}\circ\l.\pi\r|_{V_1}^{-1}\r)\circ\phi_1^{-1},
                \end{equation*}
                when restricted to $\psi_1\!\l(V_1\cap V_2\r)$, reduces to $\phi_2\circ\phi_1^{-1}$. This shows that the charts $\tpl{V_1,\psi_1}$ and $\tpl{V_2,\psi_2}$ are holomorphically compatible, as desired. Furthermore, we claim that $\pi:E\to X$ is locally biholomorphic w.r.t. $\mf{A}$. Indeed, for any $\zeta\in E$, there exist charts $\tpl{V,\psi}$ of $E$ around $\zeta$ and $\tpl{U_0,\phi}$ of $X$ around $\pi\l(\zeta\r)$ such that $\psi=\phi\circ\l.\pi\r|_V$. Then $\phi\circ\l.\pi\r|_V\circ\psi^{-1}=\id_V$, which is holomorphic, so $\pi$ is locally biholomorphic.
        \end{itemize}
        We now define a family $\eta_t\in\HOLO_{\alpha\l(t\r)}\!\l[p\r]$ for $t\in\l[0,1\r]$ as follows. For all $t\in\l[0,1\r]$, let\footnote{Such a $\zeta_t$ exists since $\pi$ is a covering map. However, it need not be unique; we let $\zeta_t$ be \textit{any} such germ. Thus an analytic continuation of $\eta_0$ along $\alpha$ need not be unique in general.} $\zeta_t\in E$ be such that $\pi\l(\zeta_t\r)=\alpha\l(t\r)$. Then there exist neighborhoods $V_t$ around $\zeta_t$ and $U_t$ around $\alpha\l(t\r)$ such that $\l.\pi\r|_{V_t}:V_t\to U_t$ is a biholomorphism. Let $\cchi_t\coloneqq\l.\pi\r|_{V_t}^{-1}$ and define $\eta_t\coloneqq\l(\cchi_t\circ\alpha\r)\l(t\r)\in\HOLO_{\alpha\l(t\r)}\!\l[p\r]$. Observe that $\hat{\eta}\coloneqq\eta_1\in\HOLO_q\!\l[p\r]$, which we claim is the analytic continuation of $\eta_0$ along $\alpha$.
        \begin{equation*}
            \begin{tikzcd}[column sep=0.5in, row sep=0.3in]
                E \ar[d, "\pi"'] & V_t \ar[l, hook] \ar[r, "\l.\ell\r|_{V_t}"] \ar[d, "\l.\pi\r|_{V_t}", bend left=10] & \C \\
                X & U_t \ar[l, hook] \ar[u, "\cchi_t", bend left=10] \ar[ur, "f_t"'] & \l[0,1\r] \ar[l, "\alpha"']
            \end{tikzcd}
        \end{equation*}
        \begin{itemize}
            \item We first construct a function $\ell:E\to\C$ as follows. For $\zeta\in E$, consider any chart $\tpl{U_0,\phi}$ of $X$ around $\pi\l(\zeta\r)$ and any function $g\in\HOLO\l[p\r]\l(U_0\r)$ such that $\zeta=\l[g\r]_{\pi\l(\zeta\r)}$. Set\footnote{This is well-defined.} $\ell\l(\zeta\r)\coloneqq g\l(\pi\l(\zeta\r)\r)$. We claim that $\ell$ has at most a single simple pole at $\eta_0$. Indeed, for any $\zeta\in E$, the chart $\tpl{V,\psi}$ as defined above that makes $\l.\pi\r|_V:V\to U$ a homeomorphism ensures that
                \begin{equation*}
                    \ell\circ\psi^{-1}=\l(\ell\circ\l.\pi\r|_V^{-1}\r)\circ\phi^{-1}=g\circ\phi^{-1},
                \end{equation*}
                which is meromorphic with at most a single simple pole at $\phi\l(p\r)$; we have $\ell\l(\eta_0\r)=g\l(p\r)$.
        \end{itemize}
        Take $\tau\in\l[0,1\r]$ and consider $\cchi_\tau:U_\tau\to V_\tau$ as defined above. Since $U_\tau$ is open, the continuity of $\alpha$ furnishes a neighborhood $T_\tau\subseteq\l[0,1\r]$ of $\tau$ such that $\alpha\l(T_\tau\r)\subseteq U_\tau$. Set $f_\tau\coloneqq\l.\ell\r|_{V_\tau}\circ\cchi_\tau$, which is in $\HOLO\l[p\r]\l(U_\tau\r)$ since $\cchi_\tau$ is holomorphic and $\ell$ is meromorphic with at most a single simple pole at $\eta_0$. It remains to show that $\l[f_t\r]_{\alpha\l(t\r)}=\eta_t$ for all $t\in T$. But this is clear since $\pi\bigl(\l[f_t\r]_{\alpha\l(t\r)}\bigr)=\alpha\l(t\r)\in U_t$ and $\l.\pi\r|_{V_t}:V_t\to U_t$ is invertible, so
        \begin{equation*}
            \l[f_t\r]_{\alpha\l(t\r)}=\l(\l.\pi\r|_{V_t}^{-1}\circ\alpha\r)\l(t\r)=\l(\cchi_t\circ\alpha\r)\l(t\r)=\eta_t.\qedin
        \end{equation*}
    \end{proof}
    \begin{remark}
        In fact\footnote{See \cite[][Exercise 7.2]{forster}.}, the existence of analytic continuations of $\eta_0$ along every curve $\alpha$ starting at $p$ is equivalent to $\pi:E\to X$ being a covering map. However, $\pi$ is not always a covering map\footnote{For instance, the \href{https://en.wikipedia.org/wiki/Lacunary_function}{Lacunary function} does not admit an analytic continuation anywhere outside its radius of convergence.}, so in practice one considers a specific function germ $\eta_0$ and studies its corresponding Étalé space $E$. Ultimately, we think that this boils down to solving a system of PDEs (with boundary conditions being the glueing conditions), but further investigation is needed.\exqed
    \end{remark}
\end{document}
